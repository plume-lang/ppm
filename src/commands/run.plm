require "../pretty"

fn run_cmd(_, args: list<Argument>): async<unit> {
  config_main = get_string(file_config, "main")

  return switch config_main {
    case Some(filename) {
      execute_command("plumec $filename.plm")
      status = await spawn_process("node", ["$filename.js"])

      switch status {
        case (?, output) => println(output)
      }

      return unit.async()
    }
    case None => error("No main file specified in config file").async()
  }
}